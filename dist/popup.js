(()=>{"use strict";function e(e,t){let s;return(...a)=>{clearTimeout(s),s=setTimeout((()=>e(...a)),t)}}class t{constructor(){this.preferencesInput=document.getElementById("preferences"),this.searchInput=document.getElementById("search"),this.settingsButton=document.getElementById("settings"),this.statusElement=document.getElementById("status"),this.initialize()}async initialize(){const e=await browser.storage.local.get(["preferences","currentSearch"]);this.preferencesInput.value=(e.preferences||[]).join(", "),this.searchInput.value=e.currentSearch||"",this.setupEventListeners()}setupEventListeners(){this.preferencesInput.addEventListener("input",e((()=>{this.updatePreferences()}),500)),this.searchInput.addEventListener("input",e((()=>{this.updateSearch()}),500)),this.settingsButton.addEventListener("click",(()=>{browser.runtime.openOptionsPage()}))}async updatePreferences(){const e=this.preferencesInput.value.split(",").map((e=>e.trim())).filter((e=>e.length>0));await browser.storage.local.set({preferences:e}),this.updateStatus("Preferences updated"),await this.broadcastMessage({type:"UPDATE_PREFERENCES",payload:{preferences:e}})}async updateSearch(){const e=this.searchInput.value.trim();await browser.storage.local.set({currentSearch:e}),this.updateStatus("Search updated"),await this.broadcastMessage({type:"UPDATE_SEARCH",payload:{search:e}})}updateStatus(e){this.statusElement.textContent=e,setTimeout((()=>{this.statusElement.textContent="Ready to analyze"}),2e3)}async broadcastMessage(e){await browser.runtime.sendMessage(e);const t=await browser.tabs.query({url:["*://*.vinted.com/*","*://*.vinted.fr/*","*://*.vinted.de/*"]});await Promise.all(t.map((t=>{if(t.id)return browser.tabs.sendMessage(t.id,e).catch((()=>{}))})))}}document.addEventListener("DOMContentLoaded",(()=>{new t}))})();
//# sourceMappingURL=popup.js.map