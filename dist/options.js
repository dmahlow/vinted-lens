(()=>{"use strict";class t{constructor(){this.apiKeyInput=document.getElementById("apiKey"),this.saveButton=document.getElementById("save"),this.statusElement=document.getElementById("status"),this.initialize()}async initialize(){const t=await async function(){const t=await browser.storage.local.get(["preferences","apiKey"]);return{defaultPreferences:t.preferences||[],apiKey:t.apiKey||""}}();this.apiKeyInput.value=t.apiKey,this.saveButton.addEventListener("click",(()=>this.saveOptions()))}async saveOptions(){const t=this.apiKeyInput.value.trim();if(t)try{if(console.log("ðŸ”‘ Raw API key:",t),console.log("ðŸ”‘ API key details:",{length:t.length,startsWith:t.substring(0,7),includes_bearer:t.toLowerCase().includes("bearer"),trimmed_length:t.trim().length}),!t.startsWith("sk-ant-"))return void this.showStatus('API key must start with "sk-ant-"',"error");await browser.storage.local.set({apiKey:t}),this.showStatus("API key saved","success")}catch(t){console.error("Failed to save options:",t),this.showStatus("Failed to save options","error")}else this.showStatus("API key is required","error")}showStatus(t,e="success"){this.statusElement.textContent=t,this.statusElement.className=e,setTimeout((()=>{this.statusElement.textContent="",this.statusElement.className=""}),3e3)}}document.addEventListener("DOMContentLoaded",(()=>{new t}))})();
//# sourceMappingURL=options.js.map